#!/bin/sh

# AREDN Phonebook Health Endpoint (meshmon.v1 schema)
# Returns JSON health status from monitoring system

echo "Content-Type: application/json"
echo "Cache-Control: no-cache"
echo ""

# Check if health JSON file exists
if [ ! -f "/tmp/meshmon_health.json" ]; then
    echo '{"error":"Health data not available","message":"Health monitoring may not be initialized yet"}'
    exit 1
fi

# Simply cat the pre-generated JSON from software_health module
cat /tmp/meshmon_health.json